apiVersion: "openstack.stable.sap.cc/v1"
kind: OpenstackSeed
metadata:
  name: limes-seed

spec:
  requires:
#  - openstack/keystone-seed  # uncomment once keystone brings its own seed
#  - openstack/neutron-seed  # uncomment once neutron brings its own seed
#  - openstack/nova-seed  # uncomment once nova brings its own seed
#  - openstack/cinder-seed  # uncomment once cinder brings its own seed
#  - openstack/manilla-seed  # uncomment once manilla brings its own seed
#  - openstack/barbican-seed  # uncomment once barbican brings its own seed
#  - openstack/designate-seed  # uncomment once designate brings its own seed
  - swift/swift-seed
  - monsoon3/default-domain-seed
  - monsoon3/ccadmin-domain-seed
  - monsoon3/cc3test-domain-seed

  roles:
    - cloud_resource_admin
    - resource_admin
    - resource_viewer

  services:
    - name:        limes
      type:        resources
      description: 'Hierarchical quota/usage tracking'
      enabled:     true
      endpoints:
        - region:    '{{.Values.global.region}}'
          interface: public
          enabled:   true
          url:       '{{.Values.limes.clusters.ccloud.catalog_url}}'

  domains:
    - name: Default
      users:
        - name: limes
          description: Limes Service
          password: '{{.Values.limes.clusters.ccloud.password}}'
          roles:
            - project: service
              role:    service

    - name: ccadmin
      project:
      - name: cloud_admin
        roles:
          # permission to enumerate all projects and domains
          - user: limes@Default
            role: admin
          # permission to manage all services' quotas
          - user: limes@Default
            role: cloud_network_admin
          - user: limes@Default
            role: cloud_compute_admin
          - user: limes@Default
            role: cloud_volume_admin
          - user: limes@Default
            role: cloud_sharedfilesystem_admin
          - user: limes@Default
            role: cloud_keymanager_admin
          - user: limes@Default
            role: cloud_dns_admin
          - user: limes@Default
            role:  swiftreseller
          # permission to extract approved quotas from Elektra during transition phase
          - user: limes@Default
            role: cloud_resource_admin

    - name: cc3test
      groups:
      - name: Administrators
        roles:
        - domain: cc3test
          role: resource_admin



